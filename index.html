<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Portfolio Backend Tester</title>
  <style>
    body { font-family: sans-serif; padding: 20px; }
    textarea, input, select { width: 100%; margin: 10px 0; }
    .section { border: 1px solid #ccc; padding: 15px; margin-bottom: 20px; border-radius: 8px; }
  </style>
</head>
<body>

  <h1>📁 Portfolio Backend API Tester</h1>

  <!-- 1. Resume Upload -->
  <div class="section">
    <h2>📄 Upload Resume</h2>
    <form id="resumeForm">
      <input type="file" name="resume" accept=".pdf,.doc,.docx" required />
      <button type="submit">Upload & Parse</button>
    </form>
    <pre id="resumeResult"></pre>
  </div>

  <!-- 2. Translate Website Content -->
  <div class="section">
    <h2>🌐 Translate Content</h2>
    <textarea id="translateInput" rows="5">
{
  "hero": { "name": "Jane", "tagline": "Creative Designer" },
  "about": { "bio": "I turn ideas into reality." }
}
    </textarea>
    <select id="langSelect">
      <option value="hi">Hindi</option>
      <option value="fr">French</option>
      <option value="es">Spanish</option>
    </select>
    <button onclick="translateContent()">Translate</button>
    <pre id="translateResult"></pre>
  </div>

  <!-- 3. Currency Display -->
  <div class="section">
    <h2>💸 Get Pricing</h2>
    <select id="countrySelect">
      <option value="US">United States</option>
      <option value="IN">India</option>
      <option value="FR">France</option>
      <option value="JP">Japan</option>
    </select>
    <button onclick="getPricing()">Get Price</button>
    <pre id="pricingResult"></pre>
  </div>

  <!-- 4. Facebook Planner -->
  <div class="section">
    <h2>📅 Facebook Growth Planner</h2>
    <form id="fbForm">
      <input type="text" name="url" placeholder="Website URL" required />
      <input type="text" name="industry" placeholder="Industry (optional)" />
      <select name="tone">
        <option value="friendly">Friendly</option>
        <option value="professional">Professional</option>
        <option value="witty">Witty</option>
      </select>
      <input type="number" name="frequency" min="1" max="7" value="2" />
      <input type="text" name="mix" placeholder='Post Mix (comma-separated, e.g. tips,news)' />
      <button type="submit">Generate Plan</button>
    </form>
    <pre id="fbResult"></pre>
  </div>

  <script>
    // Resume Upload
    document.getElementById("resumeForm").addEventListener("submit", async (e) => {
      e.preventDefault();
      const formData = new FormData(e.target);
      const res = await fetch("http://127.0.0.1:5000/upload_resume", {
        method: "POST",
        body: formData
      });
      const data = await res.json();
      document.getElementById("resumeResult").innerText = JSON.stringify(data, null, 2);
    });

    // Translate API
    async function translateContent() {
      const content = JSON.parse(document.getElementById("translateInput").value);
      const lang = document.getElementById("langSelect").value;
      const res = await fetch("http://127.0.0.1:5000/translate", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ content, lang })
      });
      const data = await res.json();
      document.getElementById("translateResult").innerText = JSON.stringify(data, null, 2);
    }

    // Currency
    async function getPricing() {
      const country = document.getElementById("countrySelect").value;
      const res = await fetch(`http://127.0.0.1:5000/pricing?country=${country}`);
      const data = await res.json();
      document.getElementById("pricingResult").innerText = JSON.stringify(data, null, 2);
    }

    // Facebook Planner
    document.getElementById("fbForm").addEventListener("submit", async (e) => {
      e.preventDefault();
      const form = e.target;
      const body = {
        url: form.url.value,
        industry: form.industry.value || "general",
        tone: form.tone.value,
        frequency: parseInt(form.frequency.value),
        mix: form.mix.value.split(",").map(s => s.trim())
      };
      const res = await fetch("http://127.0.0.1:5000/facebook/plan", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(body)
      });
      const data = await res.json();
      document.getElementById("fbResult").innerText = JSON.stringify(data, null, 2);
    });
  </script>
</body>
</html>
